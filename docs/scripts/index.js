(()=>{let f$=Object.hasOwnProperty,h$={},j$,k$=a$=>{let b$=h$[a$];return b$||(b$=h$[a$]={exports:{}},j$[a$](b$.exports,b$)),b$.exports},l$=a$=>{if(a$&&a$.__esModule)return a$;let b$={};for(let c$ in a$)f$.call(a$,c$)&&(b$[c$]=a$[c$]);return b$.default=a$,b$},p$=a$=>l$(k$(a$));j$={11(h,j){h=j.exports=k,h.getSerialize=i;function k(f,c,a,d){return JSON.stringify(f,i(c,d),a)}function i(f,c){var a=[],d=[];return c==null&&(c=function(e,b){return a[0]===b?"[Circular ~]":"[Circular ~."+d.slice(0,a.indexOf(b)).join(".")+"]"}),function(e,b){if(a.length>0){var g=a.indexOf(this);~g?a.splice(g+1):a.push(this),~g?d.splice(g,Infinity,e):d.push(e),~a.indexOf(b)&&(b=c.call(this,e,b))}else a.push(b);return f==null?b:f.call(this,e,b)}}},12(u,q){"use strict";var r=k$(11),s=function(){var e=4022871197,g=function(h){if(h){h=h.toString();for(var i=0;i<h.length;i++){e+=h.charCodeAt(i);var d=.02519603282416938*e;e=d>>>0,d-=e,d*=e,e=d>>>0,d-=e,e+=d*4294967296}return(e>>>0)*2.3283064365386963e-10}else e=4022871197};return g},m=function(e){return function(){var g=48,h=1,i=g,d=new Array(g),c,f,n=0,k=new s();for(c=0;c<g;c++)d[c]=k(Math.random());var o=function(){++i>=g&&(i=0);var a=1768863*d[i]+h*2.3283064365386963e-10;return d[i]=a-(h=a|0)},b=function(a){return Math.floor(a*(o()+(o()*2097152|0)*1.1102230246251565e-16))};b.string=function(a){var j,l="";for(j=0;j<a;j++)l+=String.fromCharCode(33+b(94));return l};var t=function(){var a=Array.prototype.slice.call(arguments);for(c=0;c<a.length;c++)for(f=0;f<g;f++)d[f]-=k(a[c]),d[f]<0&&(d[f]+=1)};return b.cleanString=function(a){return a=a.replace(/(^\s*)|(\s*$)/gi,""),a=a.replace(/[\x00-\x1F]/gi,""),a=a.replace(/\n /,`
`),a},b.hashString=function(a){for(a=b.cleanString(a),k(a),c=0;c<a.length;c++)for(n=a.charCodeAt(c),f=0;f<g;f++)d[f]-=k(n),d[f]<0&&(d[f]+=1)},b.seed=function(a){(typeof a==="undefined"||a===null)&&(a=Math.random()),typeof a!=="string"&&(a=r(a,function(j,l){return typeof l==="function"?l.toString():l})),b.initState(),b.hashString(a)},b.addEntropy=function(){var a=[];for(c=0;c<arguments.length;c++)a.push(arguments[c]);t(n+++new Date().getTime()+a.join("")+Math.random())},b.initState=function(){for(k(),c=0;c<g;c++)d[c]=k(" ");h=1,i=g},b.done=function(){k=null},typeof e!=="undefined"&&b.seed(e),b.range=function(a){return b(a)},b.random=function(){return b(Number.MAX_VALUE-1)/Number.MAX_VALUE},b.floatBetween=function(a,j){return b.random()*(j-a)+a},b.intBetween=function(a,j){return Math.floor(b.random()*(j-a+1))+a},b}()};m.create=function(e){return new m(e)},q.exports=m},9(f){"use strict";Object.defineProperty(f,"__esModule",{value:!0});var h=function(){function d(c,a){for(var b=0;b<a.length;b++){var e=a[b];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(c,e.key,e)}}return function(c,a,b){return a&&d(c.prototype,a),b&&d(c,b),c}}(),i=k$(12),j=k(i);function k(d){return d&&d.__esModule?d:{default:d}}function l(d,c){if(!(d instanceof c))throw new TypeError("Cannot call a class as a function")}var m=function(){function d(c){l(this,d),this.rng=j.default.create(c)}return h(d,[{key:"int",value:function c(a,b){return this.rng.intBetween(a,b)}},{key:"float",value:function c(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return this.rng.floatBetween(a,b)}},{key:"vec",value:function c(a,b){return[this.int(a[0],b[0]),this.int(a[1],b[1])]}},{key:"choose",value:function c(a){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=this.rng.intBetween(0,a.length-1);return b?a.splice(e,1)[0]:a[e]}},{key:"maybe",value:function c(a){return this.float()<=a}}]),d}();f.default=m},7(p){"use strict";Object.defineProperty(p,"__esModule",{value:!0});var l=function(){function k(e,c){var b=[],a=!0,d=!1,f=void 0;try{for(var g=e[Symbol.iterator](),j;!(a=(j=g.next()).done);a=!0){b.push(j.value);if(c&&b.length===c)break}}catch(i){d=!0,f=i}finally{try{!a&&g.return&&g.return()}finally{if(d)throw f}}return b}return function(e,c){if(Array.isArray(e))return e;{if(Symbol.iterator in Object(e))return k(e,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}(),q=function(){function k(e,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,c,b){return c&&k(e.prototype,c),b&&k(e,b),e}}();function r(k,e){if(!(k instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function k(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0],c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;r(this,k),this.rows=[],this.size=[];for(var b=0;b<e[1];b++){for(var a=[],d=0;d<e[0];d++)a.push(c);this.rows.push(a)}}return q(k,[{key:"iter",value:function e(c,b){for(var a=0;a<this.size[1];a++)for(var d=0;d<this.size[0];d++)c.apply(b,[[d,a],this.get([d,a])])}},{key:"get",value:function e(c){var b=l(c,2),a=b[0],d=b[1];return this.rows[d]===void 0?void 0:this.rows[d][a]}},{key:"set",value:function e(c,b){var a=l(c,2),d=a[0],f=a[1];this.rows[f][d]=b}},{key:"set_horizontal_line",value:function e(c,b,a){for(var d=l(c,2),f=d[0],g=d[1],j=Math.abs(b),i=b<0?-1:1,h=0;h<=j;h++)this.set([f+h*i,g],a)}},{key:"set_vertical_line",value:function e(c,b,a){for(var d=l(c,2),f=d[0],g=d[1],j=Math.abs(b),i=b<0?-1:1,h=0;h<=j;h++)this.set([f,g+h*i],a)}},{key:"get_square",value:function e(c,b){for(var a=l(c,2),d=a[0],f=a[1],g=l(b,2),j=g[0],i=g[1],h=new k([j,i]),n=0;n<j;n++)for(var m=0;m<i;m++)h.set([n,m],this.get([d+n,f+m]));return h}},{key:"set_square",value:function e(c,b,a){var d=l(c,2),f=d[0],g=d[1],j=l(b,2),i=j[0],h=j[1],n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!n)this.line_h([f,g],i-1,a),this.line_h([f,g+h-1],i-1,a),this.line_v([f,g],h-1,a),this.line_v([f+i-1,g],h-1,a);else for(var m=0;m<i;m++)for(var o=0;o<h;o++)this.set([f+m,g+o],a)}}]),k}();p.default=s},10(k){"use strict";Object.defineProperty(k,"__esModule",{value:!0});var l=function(){function a(b,c){var d=[],f=!0,h=!1,j=void 0;try{for(var g=b[Symbol.iterator](),m;!(f=(m=g.next()).done);f=!0){d.push(m.value);if(c&&d.length===c)break}}catch(n){h=!0,j=n}finally{try{!f&&g.return&&g.return()}finally{if(h)throw j}}return d}return function(b,c){if(Array.isArray(b))return b;{if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();function i(a,b,c,d){if(Array.isArray(a)&&Array.isArray(b)){var f=b,h=l(f,2);c=h[0],d=h[1];var j=a,g=l(j,2);a=g[0],b=g[1]}this.setValues(a,b,c,d)}var e=i.prototype;e.setValues=function(a,b,c,d){return this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0,this},e.extend=function(a,b,c,d){return c=c||0,d=d||0,a+c>this.x+this.width&&(this.width=a+c-this.x),b+d>this.y+this.height&&(this.height=b+d-this.y),a<this.x&&(this.width+=this.x-a,this.x=a),b<this.y&&(this.height+=this.y-b,this.y=b),this},e.pad=function(a,b,c,d){return this.x-=b,this.y-=a,this.width+=b+d,this.height+=a+c,this},e.copy=function(a){return this.setValues(a.x,a.y,a.width,a.height)},e.contains=function(a,b,c,d){return c=c||0,d=d||0,a>=this.x&&a+c<=this.x+this.width&&b>=this.y&&b+d<=this.y+this.height},e.union=function(a){return this.clone().extend(a.x,a.y,a.width,a.height)},e.intersection=function(a){var b=a.x,c=a.y,d=b+a.width,f=c+a.height;return this.x>b&&(b=this.x),this.y>c&&(c=this.y),this.x+this.width<d&&(d=this.x+this.width),this.y+this.height<f&&(f=this.y+this.height),d<=b||f<=c?null:new i(b,c,d-b,f-c)},e.intersects=function(a){return a.x<=this.x+this.width&&this.x<=a.x+a.width&&a.y<=this.y+this.height&&this.y<=a.y+a.height},e.isEmpty=function(){return this.width<=0||this.height<=0},e.clone=function(){return new i(this.x,this.y,this.width,this.height)},e.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},k.default=i},1(b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var g,h,i,j,k;function a(l,m,n){return m in l?Object.defineProperty(l,m,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[m]=n,l}var c=b.TOP=0,d=b.RIGHT=90,e=b.BOTTOM=180,f=b.LEFT=270,q=b.FACING=[c,d,e,f],r=b.FACING_TO_STRING=(g={},a(g,c,"top"),a(g,d,"right"),a(g,e,"bottom"),a(g,f,"left"),g),s=b.FACING_TO_MOD=(h={},a(h,c,[0,-1]),a(h,d,[1,0]),a(h,e,[0,1]),a(h,f,[-1,0]),h),t=b.FACING_INVERSE=(i={},a(i,c,e),a(i,d,f),a(i,e,c),a(i,f,d),i),u=b.FACING_MOD_RIGHT=(j={},a(j,c,d),a(j,d,e),a(j,e,f),a(j,f,c),j),v=b.FACING_MOD_LEFT=(k={},a(k,c,f),a(k,d,c),a(k,e,d),a(k,f,e),k)},8(f){"use strict";Object.defineProperty(f,"__esModule",{value:!0});var n=function(){function b(a,c){var d=[],e=!0,h=!1,i=void 0;try{for(var g=a[Symbol.iterator](),j;!(e=(j=g.next()).done);e=!0){d.push(j.value);if(c&&d.length===c)break}}catch(w){h=!0,i=w}finally{try{!e&&g.return&&g.return()}finally{if(h)throw i}}return d}return function(a,c){if(Array.isArray(a))return a;{if(Symbol.iterator in Object(a))return b(a,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();f.iter_adjacent=p,f.iter_2d=q,f.iter_range=r,f.intersects=s,f.array_test=t,f.add=l,f.shift=k,f.shift_left=u,f.shift_right=v;var o=k$(1);function p(b,a){var c=n(b,2),d=c[0],e=c[1];a([d-1,e]),a([d,e-1]),a([d+1,e]),a([d,e+1])}function q(b,a){for(var c=0;c<b[1];c++)for(var d=0;d<b[0];d++)a([d,c])}function r(b,a,c){var d=void 0,e=void 0,h=void 0,i=void 0;b[0]<a[0]?(d=b[0],h=a[0]):(d=a[0],h=b[0]),b[1]<a[1]?(e=b[1],i=a[1]):(e=a[1],i=b[1]);for(var g=d;g<=h;g++)for(var j=e;j<=i;j++)c([g,j])}function s(b,a,c,d){return!c[0]>b[0]+a[0]||c[0]+d[0]<b[0]||c[1]>b[1]+a[1]||c[1]+d[1]<a[1]}function t(b,a){for(var c=0;c<b.length;c++)if(a(b[c]))return!0;return!1}function l(b,a){return[b[0]+a[0],b[1]+a[1]]}function k(b,a){return l(b,o.FACING_TO_MOD[a])}function u(b,a){return k(b,(a-90+360)%360)}function v(b,a){return k(b,(a+90+360)%360)}},5(n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var j=function(){function f(d,a){var c=[],b=!0,e=!1,g=void 0;try{for(var h=d[Symbol.iterator](),i;!(b=(i=h.next()).done);b=!0){c.push(i.value);if(a&&c.length===a)break}}catch(m){e=!0,g=m}finally{try{!b&&h.return&&h.return()}finally{if(e)throw g}}return c}return function(d,a){if(Array.isArray(d))return d;{if(Symbol.iterator in Object(d))return f(d,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}(),p=function(){function f(d,a){for(var c=0;c<a.length;c++){var b=a[c];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(d,b.key,b)}}return function(d,a,c){return a&&f(d.prototype,a),c&&f(d,c),d}}(),q=k$(7),r=o(q),s=k$(10),t=o(s),k=k$(8);function o(f){return f&&f.__esModule?f:{default:f}}function u(f){return Array.isArray(f)?f:Array.from(f)}function v(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}var w=0,x=function(){function f(d){v(this,f),d=Object.assign({size:[1,1],position:[0,0],parent:null,max_exits:10,tag:""},d),Object.assign(this,d),this.options=d,this.id=w++,this.walls=new r.default(this.size,!0),this.perimeter=[],this.exits=[],this.children=[]}return p(f,[{key:"is_exit",value:function d(a){var c=j(a,2),b=c[0],e=c[1];return this.exits.filter(function(g){var h=u(g),i=h[0],m=h[1],z=h.slice(2);return i===b&&m===e}).length!==0}},{key:"get_non_wall_tiles",value:function d(){var a=[];return this.walls.iter(function(c,b){b||a.push(c)}),a}},{key:"get_perimeter_by_facing",value:function d(a){return this.perimeter.filter(function(c){var b=j(c,2),e=j(b[0],2),g=e[0],h=e[1],i=b[1];return a===i})}},{key:"get_inner_perimeter",value:function d(){var a=this,c=[],b=void 0,e=void 0;return this.walls.iter(function(g,h){!h&&!a.is_exit(g)&&(b=!1,e=!1,(0,k.iter_adjacent)(g,function(i){b=b||a.walls.get(i),e=e||a.is_exit(i)}),b&&!e&&c.push(g))}),c}},{key:"parent_pos",value:function d(a){var c=j(a,2),b=c[0],e=c[1];return[this.position[0]+b,this.position[1]+e]}},{key:"global_pos",value:function d(a){return a=this.parent_pos(a),this.parent&&(a=this.parent.global_pos(a)),a}},{key:"local_pos",value:function d(a){return[a[0]-this.position[0],a[1]-this.position[1]]}},{key:"get_center_pos",value:function d(){return[Math.floor(this.size[0]/2),Math.floor(this.size[1]/2)]}},{key:"add_perimeter",value:function d(a,c,b){var e=this;(0,k.iter_range)(a,c,function(g){e.perimeter.push([g,b])})}},{key:"remove_perimeter",value:function d(a){this.perimeter=this.perimeter.filter(function(c){var b=j(c,3),e=b[0],g=b[1],h=b[2];return!a.contains(e,g,1,1)})}},{key:"intersects",value:function d(a){return(0,k.intersects)(this.position,this.size,a.position,a.size)}},{key:"add_piece",value:function d(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if((0,k.array_test)(this.children,function(b){return b.id===a.id}))return;a.parent=this,c&&(a.position=c),this.children.push(a),this.paste_in(a)}},{key:"paste_in",value:function d(a){var c=this;(0,k.iter_2d)(a.size,function(b){var e=a.walls.get(b);e||c.walls.set(a.parent_pos(b),!1)})}},{key:"add_exit",value:function d(a,c){this.walls.set(a[0],!1),this.parent&&this.parent.paste_in(this),this.exits.push([a[0],a[1],c])}},{key:"print",value:function d(){for(var a=0;a<this.size[1];a++){for(var c="",b=0;b<this.size[0];b++)this.start_pos&&this.start_pos[0]===b&&this.start_pos[1]===a?c+="s":c+=this.walls.get([b,a])?"x":" ";console.log(c)}}},{key:"rect",get:function d(){return new t.default(this.position[0],this.position[1],this.size[0],this.size[1])}}]),f}();n.default=x},3(k){"use strict";Object.defineProperty(k,"__esModule",{value:!0});var n=function(){function d(b,e){for(var a=0;a<e.length;a++){var c=e[a];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(b,c.key,c)}}return function(b,e,a){return e&&d(b.prototype,e),a&&d(b,a),b}}(),o=function d(b,e,a){b===null&&(b=Function.prototype);var c=Object.getOwnPropertyDescriptor(b,e);if(c===void 0){var f=Object.getPrototypeOf(b);return f===null?void 0:d(f,e,a)}else{if("value"in c)return c.value;{var h=c.get;return h===void 0?void 0:h.call(a)}}},p=k$(9),q=j(p),r=k$(5),s=j(r),t=k$(10),l=j(t),u=k$(1);function j(d){return d&&d.__esModule?d:{default:d}}function v(d,b){if(!(d instanceof b))throw new TypeError("Cannot call a class as a function")}function w(d,b){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b==="object"||typeof b==="function")?b:d}function x(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);d.prototype=Object.create(b&&b.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(d,b):d.__proto__=b)}var y=function(d){x(b,d);function b(e){v(this,b);var a=w(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,e));return a.random=new q.default(a.seed),a.start_pos=[0,0],a.minx=a.size[0],a.maxx=0,a.miny=a.size[1],a.maxy=0,a}return n(b,[{key:"add_piece",value:function e(a,c){o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"add_piece",this).call(this,a,c),this.minx=Math.min(this.minx,a.position[0]),this.maxx=Math.max(this.maxx,a.position[0]+a.size[0]),this.miny=Math.min(this.miny,a.position[1]),this.maxy=Math.max(this.maxy,a.position[1]+a.size[1])}},{key:"trim",value:function e(){var a=this;this.size=[this.maxx-this.minx,this.maxy-this.miny],this.children.forEach(function(c){c.position=[c.position[0]-a.minx,c.position[1]-a.miny]}),this.start_pos=[this.start_pos[0]-this.minx,this.start_pos[1]-this.miny],this.walls=this.walls.get_square([this.minx,this.miny],this.size),this.minx=0,this.maxx=this.size[0],this.miny=0,this.maxy=this.size[1]}},{key:"generate",value:function e(){throw new Error("not implemented")}},{key:"fits",value:function e(a,c){var f=void 0,h=void 0,g=void 0;for(h=0;h<a.size[0];h++)for(g=0;g<a.size[1];g++){f=this.walls.get([c[0]+h,c[1]+g]);if(f===!1||f===null||f===void 0)return!1}return!0}},{key:"join_exits",value:function e(a,c,f,h){a.add_exit(c,f),f.add_exit(h,a);var g=a.rect.intersection(f.rect);g&&(a.remove_perimeter(new l.default(a.local_pos([g[0],g[1]],[g.width,g.height]))),f.remove_perimeter(new l.default(f.local_pos([g[0],g[1]],[g.width,g.height]))))}},{key:"join",value:function e(a,c,f,h){h||(h=this.random.choose(a.get_perimeter_by_facing(u.FACING_INVERSE[c[1]])));var g=a.parent_pos(h[0]),m=[g[0]-c[0][0],g[1]-c[0][1]];return this.fits(f,m)?(this.join_exits(a,h,f,c),this.add_piece(f,m),!0):!1}},{key:"get_open_pieces",value:function e(a){return a.filter(function(c){return c.exits.length<c.max_exits&&c.perimeter.length})}}]),b}(s.default);k.default=y},6(i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var l=function(){function c(a,d){var b=[],f=!0,g=!1,h=void 0;try{for(var e=a[Symbol.iterator](),j;!(f=(j=e.next()).done);f=!0){b.push(j.value);if(d&&b.length===d)break}}catch(t){g=!0,h=t}finally{try{!f&&e.return&&e.return()}finally{if(g)throw h}}return b}return function(a,d){if(Array.isArray(a))return a;{if(Symbol.iterator in Object(a))return c(a,d);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}(),m=k$(5),n=o(m);function o(c){return c&&c.__esModule?c:{default:c}}function p(c,a){if(!(c instanceof a))throw new TypeError("Cannot call a class as a function")}function q(c,a){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a==="object"||typeof a==="function")?a:c}function r(c,a){if(typeof a!=="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}var s=function(c){r(a,c);function a(d){p(this,a),d.room_size=d.size,d.size=[d.size[0]+2,d.size[1]+2],d=Object.assign({},{symmetric:!1},d);var b=q(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,d));b.walls.set_square([1,1],b.room_size,!1,!0);if(!b.symmetric)b.add_perimeter([1,0],[b.size[0]-2,0],180),b.add_perimeter([0,1],[0,b.size[1]-2],90),b.add_perimeter([1,b.size[1]-1],[b.size[0]-2,b.size[1]-1],0),b.add_perimeter([b.size[0]-1,1],[b.size[0]-1,b.size[1]-2],270);else{var f=b.get_center_pos(),g=l(f,2),h=g[0],e=g[1];b.perimeter=[[[h,0],180],[[b.size[0]-1,e],270],[[h,b.size[1]-1],0],[[0,e],90]]}return b}return a}(n.default);i.default=s},4(g){"use strict";Object.defineProperty(g,"__esModule",{value:!0});var i=k$(6),j=k(i);function k(b){return b&&b.__esModule?b:{default:b}}function l(b,a){if(!(b instanceof a))throw new TypeError("Cannot call a class as a function")}function m(b,a){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a==="object"||typeof a==="function")?a:b}function n(b,a){if(typeof a!=="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}var o=function(b){n(a,b);function a(d){l(this,a),d=Object.assign({},{length:2,facing:0,max_exits:4},d),d.size=d.facing===0||d.facing===180?[1,d.length]:[d.length,1];var c=m(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,d)),e=c.size[0]-1,f=c.size[1]-1;return c.facing===180?c.perimeter=[[[1,f],0],[[0,1],90],[[2,1],270],[[1,0],180]]:c.facing===270?c.perimeter=[[[0,1],90],[[e-1,0],180],[[e-1,2],0],[[e,1],270]]:c.facing===0?c.perimeter=[[[1,0],180],[[2,f-1],270],[[0,f-1],90],[[1,f],0]]:c.facing===90&&(c.perimeter=[[[e,1],270],[[1,2],0],[[1,0],180],[[0,1],90]]),c}return a}(j.default);g.default=o},2(r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function f(b,h){for(var a=0;a<h.length;a++){var c=h[a];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(b,c.key,c)}}return function(b,h,a){return h&&f(b.prototype,h),a&&f(b,a),b}}(),v=k$(3),w=n(v),x=k$(4),s=n(x),y=k$(6),z=n(y),A=k$(1),m=k$(8);function n(f){return f&&f.__esModule?f:{default:f}}function B(f,b){if(!(f instanceof b))throw new TypeError("Cannot call a class as a function")}function C(f,b){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b==="object"||typeof b==="function")?b:f}function D(f,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);f.prototype=Object.create(b&&b.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(f,b):f.__proto__=b)}var E=function(f){D(b,f);function b(h){B(this,b),h=Object.assign({},{max_iterations:50,size:[100,100],rooms:{initial:{min_size:[3,3],max_size:[3,3],max_exits:1},any:{min_size:[2,2],max_size:[5,5],max_exits:4}},max_corridor_length:6,min_corridor_length:2,corridor_density:.5,symmetric_rooms:!1,interconnects:1,max_interconnect_length:10,room_count:10},h);var a=C(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,h));a.room_tags=Object.keys(a.rooms).filter(function(d){return d!=="any"&&d!=="initial"});for(var c=a.room_tags.length;c<a.room_count;c++)a.room_tags.push("any");return a.rooms=[],a.corridors=[],a}return u(b,[{key:"add_room",value:function h(a,c){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,e=void 0,g=void 0;if(d)g=d,d=null;else{e=this.get_open_pieces(this.children);if(e&&e.length)g=this.random.choose(e);else return console.log("ran out of choices connecting"),!1}if(c){if(this.join(g,c,a))return!0}else for(var i=a.perimeter.slice();i.length;)if(this.join(g,this.random.choose(i,!0),a))return!0;return!1}},{key:"new_corridor",value:function h(){return new s.default({length:this.random.int(this.min_corridor_length,this.max_corridor_length),facing:this.random.choose(A.FACING)})}},{key:"add_interconnect",value:function h(){var a={},c=void 0,d=void 0,e=void 0;this.children.forEach(function(l){l.exits.length<l.max_exits&&l.perimeter.forEach(function(t){e=l.parent_pos(t[0]),c=e[0]+"_"+e[1],a[c]=[t,l]})});for(var g=void 0,i=void 0,j=void 0,o=void 0,p=this.children.length-1;p--;p>=0){g=this.children[p];if(g.exits.length<g.max_exits)for(var q=0;q<g.perimeter.length;q++)for(d=g.perimeter[q],e=g.parent_pos(d[0]),i=-1;i<=this.max_interconnect_length;){if(!this.walls.get(e)||!this.walls.get((0,m.shift_left)(e,d[1]))||!this.walls.get((0,m.shift_right)(e,d[1])))break;c=e[0]+"_"+e[1];if(a[c]&&a[c][1].id!==g.id)return o=a[c][1],i>-1?(j=new s.default({length:i,facing:d[1]}),this.join(g,j.perimeter[0],j,d)?(this.join_exits(o,a[c][0],j,j.perimeter[j.perimeter.length-1]),!0):!1):(this.join_exits(o,a[c][0],g,d),!0);e=(0,m.shift)(e,d[1]),i++}}}},{key:"new_room",value:function h(a){a=a||this.random.choose(this.room_tags,!1);var c=this.options.rooms[a],d=new z.default({size:this.random.vec(c.min_size,c.max_size),max_exits:c.max_exits,symmetric:this.symmetric_rooms,tag:a});return this.room_tags.splice(this.room_tags.indexOf(a),1),a==="initial"&&(this.initial_room=d),d}},{key:"generate",value:function h(){var a=this.options.room_count-1,c=this.new_room(this.options.rooms.initial?"initial":void 0),d=Math.round(this.corridor_density*a);this.add_piece(c,this.options.rooms.initial&&this.options.rooms.initial.position?this.options.rooms.initial.position:this.get_center_pos());for(var e=void 0,g=this.max_iterations;(d||a)&&--g;){e=this.random.int(1,a+d);if(e<=d){var i=this.new_corridor(),j=this.add_room(i,i.perimeter[0]);d--,a>0&&j&&(this.add_room(this.new_room(),null,i),a--)}else this.add_room(this.new_room()),a--}for(e=0;e<this.interconnects;e++)this.add_interconnect();return this.trim(),this.initial_room&&(this.start_pos=this.initial_room.global_pos(this.initial_room.get_center_pos())),g>0}}]),b}(w.default);r.default=E},0(c,b){b.exports=k$(2).default},28(g){"use strict";function h(a,d){a==null&&(a={});for(var e={},f=Object.keys(d),b=0,i=f.length;b<i;b++){var c=f[b];e[c]=a[c]||d[c]}return e}g.defaults=h},15(b,a){a.exports={useLongScale:!1,baseSeparator:"-",unitSeparator:"and ",base:{"0":"zero","1":"one","2":"two","3":"three","4":"four","5":"five","6":"six","7":"seven","8":"eight","9":"nine","10":"ten","11":"eleven","12":"twelve","13":"thirteen","14":"fourteen","15":"fifteen","16":"sixteen","17":"seventeen","18":"eighteen","19":"nineteen","20":"twenty","30":"thirty","40":"forty","50":"fifty","60":"sixty","70":"seventy","80":"eighty","90":"ninety"},units:["hundred","thousand","million","billion","trillion","quadrillion","quintillion","sextillion","septillion","octillion","nonillion","decillion","undecillion","duodecillion","tredecillion","quattuordecillion","quindecillion"],unitExceptions:[]}},17(b,a){a.exports={useLongScale:!0,baseSeparator:" y ",unitSeparator:"",base:{"0":"cero","1":"uno","2":"dos","3":"tres","4":"cuatro","5":"cinco","6":"seis","7":"siete","8":"ocho","9":"nueve","10":"diez","11":"once","12":"doce","13":"trece","14":"catorce","15":"quince","16":"dieciséis","17":"diecisiete","18":"dieciocho","19":"diecinueve","20":"veinte","21":"veintiuno","22":"veintidós","23":"veintitrés","24":"veinticuatro","25":"veinticinco","26":"veintiséis","27":"veintisiete","28":"veintiocho","29":"veintinueve","30":"treinta","40":"cuarenta","50":"cincuenta","60":"sesenta","70":"setenta","80":"ochenta","90":"noventa","100":"cien","200":"doscientos","300":"trescientos","400":"cuatrocientos","500":"quinientos","600":"seiscientos","700":"setecientos","800":"ochocientos","900":"novecientos","1000":"mil"},unitExceptions:{"1000000":"un millón","1000000000000":"un billón","1000000000000000000":"un trillón","1000000000000000000000000":"un cuatrillones","1000000000000000000000000000000":"un quintillón","1000000000000000000000000000000000000":"un sextillón","1000000000000000000000000000000000000000000":"un septillón","1000000000000000000000000000000000000000000000000":"un octillón","1000000000000000000000000000000000000000000000000000000":"un nonillón","1000000000000000000000000000000000000000000000000000000000000":"un decillón","1000000000000000000000000000000000000000000000000000000000000000000":"un undecillón","1000000000000000000000000000000000000000000000000000000000000000000000000":"un duodecillón","1000000000000000000000000000000000000000000000000000000000000000000000000000000":"un tredecillón","1000000000000000000000000000000000000000000000000000000000000000000000000000000000000":"un cuatordecillón","1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000":"un quindecillón"},units:[{singular:"ciento",useBaseInstead:!0,useBaseException:[1]},{singular:"mil",avoidPrefixException:[1]},{singular:"millón",plural:"millones"},{singular:"billón",plural:"billones"},{singular:"trillón",plural:"trillones"},{singular:"cuatrillón",plural:"cuatrillones"},{singular:"quintillón",plural:"quintillones"},{singular:"sextillón",plural:"sextillones"},{singular:"septillón",plural:"septillones"},{singular:"octillón",plural:"octillones"},{singular:"nonillón",plural:"nonillones"},{singular:"decillón",plural:"decillones"},{singular:"undecillón",plural:"undecillones"},{singular:"duodecillón",plural:"duodecillones"},{singular:"tredecillón",plural:"tredecillones"},{singular:"cuatrodecillón",plural:"cuatrodecillones"},{singular:"quindecillón",plural:"quindecillones"}]}},13(b,a){a.exports={useLongScale:!1,baseSeparator:"",unitSeparator:"",allSeparator:"و",base:{"0":"صفر","1":"واحد","2":"اثنان","3":"ثلاثة","4":"أربعة","5":"خمسة","6":"ستة","7":"سبعة","8":"ثمانية","9":"تسعة","10":"عشرة","11":"أحد عشر","12":"إثنا عشر","13":"ثلاثة عشر","14":"أربعة عشر","15":"خمسة عشر","16":"ستة عشر","17":"سبعة عشر","18":"ثمانية عشر","19":"تسعة عشر","20":"عشرون","21":"واحد وعشرون","22":"اثنان وعشرون","23":"ثلاثة وعشرون","24":"أربعة وعشرون","25":"خمسة وعشرون","26":"ستة وعشرون","27":"سبعة وعشرون","28":"ثمانية وعشرون","29":"تسعة وعشرون","30":"ثلاثون","31":"واحد وثلاثون","32":"اثنان وثلاثون","33":"ثلاثة وثلاثون","34":"أربعة وثلاثون","35":"خمسة وثلاثون","36":"ستة وثلاثون","37":"سبعة وثلاثون","38":"ثمانية وثلاثون","39":"تسعة وثلاثون","40":"أربعون","41":"واحد وأربعون","42":"اثنان وأربعون","43":"ثلاثة وأربعون","44":"أربعة وأربعون","45":"خمسة وأربعون","46":"ستة وأربعون","47":"سبعة وأربعون","48":"ثمانية وأربعون","49":"تسعة وأربعون","50":"خمسون","51":"واحد وخمسون","52":"اثنان وخمسون","53":"ثلاثة وخمسون","54":"أربعة وخمسون","55":"خمسة وخمسون","56":"ستة وخمسون","57":"سبعة وخمسون","58":"ثمانية وخمسون","59":"تسعة وخمسون","60":"ستون","61":"واحد وستون","62":"اثنان وستون","63":"ثلاثة وستون","64":"أربعة وستون","65":"خمسة وستون","66":"ستة وستون","67":"سبعة وستون","68":"ثمانية وستون","69":"تسعة وستون","70":"سبعون","71":"واحد وسبعون","72":"اثنان وسبعون","73":"ثلاثة وسبعون","74":"أربعة وسبعون","75":"خمسة وسبعون","76":"ستة وسبعون","77":"سبعة وسبعون","78":"ثمانية وسبعون","79":"تسعة وسبعون","80":"ثمانون","81":"واحد وثمانون","82":"اثنان وثمانون","83":"ثلاثة وثمانون","84":"أربعة وثمانون","85":"خمسة وثمانون","86":"ستة وثمانون","87":"سبعة وثمانون","88":"ثمانية وثمانون","89":"تسعة وثمانون","90":"تسعون","91":"واحد وتسعون","92":"اثنان وتسعون","93":"ثلاثة وتسعون","94":"أربعة وتسعون","95":"خمسة وتسعون","96":"ستة وتسعون","97":"سبعة وتسعون","98":"ثمانية وتسعون","99":"تسعة وتسعون","200":"مائتان","300":"ثلاثمائة","400":"أربعمائة","500":"خمسمائة","600":"ستمائة","700":"سبعمائة","800":"ثمانمائة","900":"تسعمائة"},units:[{singular:"مائة",useBaseInstead:!0,useBaseException:[1]},{singular:"ألف",dual:"ألفان",plural:"آلاف",restrictedPlural:!0,avoidPrefixException:[1,2]},{singular:"مليون",dual:"مليونان",plural:"ملايين",restrictedPlural:!0,avoidPrefixException:[1,2]},{singular:"مليار",dual:"ملياران",plural:"ملايير",restrictedPlural:!0,avoidPrefixException:[1,2]},{singular:"تريليون",avoidPrefixException:[1]},{singular:"كوادريليون",avoidPrefixException:[1]},{singular:"كوينتليون",avoidPrefixException:[1]},{singular:"سكستليون",avoidPrefixException:[1]},{singular:"سبتيلليون",avoidPrefixException:[1]},{singular:"أوكتيليون",avoidPrefixException:[1]},{singular:"نونيلليون",avoidPrefixException:[1]},{singular:"دشيليون",avoidPrefixException:[1]},{singular:"أوندشيلليون",avoidPrefixException:[1]},{singular:"دودشيليون",avoidPrefixException:[1]},{singular:"تريدشيليون",avoidPrefixException:[1]},{singular:"كواتوردشيليون",avoidPrefixException:[1]},{singular:"كويندشيليون",avoidPrefixException:[1]}],unitExceptions:{}}},23(b,a){a.exports={useLongScale:!1,baseSeparator:" e ",unitSeparator:"e ",andWhenTrailing:!0,base:{"0":"zero","1":"um","2":"dois","3":"três","4":"quatro","5":"cinco","6":"seis","7":"sete","8":"oito","9":"nove","10":"dez","11":"onze","12":"doze","13":"treze","14":"catorze","15":"quinze","16":"dezesseis","17":"dezessete","18":"dezoito","19":"dezenove","20":"vinte","30":"trinta","40":"quarenta","50":"cinquenta","60":"sessenta","70":"setenta","80":"oitenta","90":"noventa","100":"cem","200":"duzentos","300":"trezentos","400":"quatrocentos","500":"quinhentos","600":"seiscentos","700":"setecentos","800":"oitocentos","900":"novecentos","1000":"mil"},unitExceptions:{"1":"um"},units:[{singular:"cento",useBaseInstead:!0,useBaseException:[1],useBaseExceptionWhenNoTrailingNumbers:!0,andException:!0},{singular:"mil",avoidPrefixException:[1],andException:!0},{singular:"milhão",plural:"milhões"},{singular:"bilhão",plural:"bilhões"},{singular:"trilhão",plural:"trilhões"},{singular:"quadrilhão",plural:"quadrilhão"},{singular:"quintilhão",plural:"quintilhões"},{singular:"sextilhão",plural:"sextilhões"},{singular:"septilhão",plural:"septilhões"},{singular:"octilhão",plural:"octilhões"},{singular:"nonilhão",plural:"nonilhões"},{singular:"decilhão",plural:"decilhões"},{singular:"undecilhão",plural:"undecilhões"},{singular:"doudecilhão",plural:"doudecilhões"},{singular:"tredecilhão",plural:"tredecilhões"}]}},22(b,a){a.exports={useLongScale:!0,baseSeparator:" e ",unitSeparator:"e ",andWhenTrailing:!0,base:{"0":"zero","1":"um","2":"dois","3":"três","4":"quatro","5":"cinco","6":"seis","7":"sete","8":"oito","9":"nove","10":"dez","11":"onze","12":"doze","13":"treze","14":"catorze","15":"quinze","16":"dezasseis","17":"dezassete","18":"dezoito","19":"dezanove","20":"vinte","30":"trinta","40":"quarenta","50":"cinquenta","60":"sessenta","70":"setenta","80":"oitenta","90":"noventa","100":"cem","200":"duzentos","300":"trezentos","400":"quatrocentos","500":"quinhentos","600":"seiscentos","700":"setecentos","800":"oitocentos","900":"novecentos","1000":"mil"},unitExceptions:{"1":"um"},units:[{singular:"cento",useBaseInstead:!0,useBaseException:[1],useBaseExceptionWhenNoTrailingNumbers:!0,andException:!0},{singular:"mil",avoidPrefixException:[1],andException:!0},{singular:"milhão",plural:"milhões"},{singular:"bilião",plural:"biliões"},{singular:"trilião",plural:"triliões"},{singular:"quadrilião",plural:"quadriliões"},{singular:"quintilião",plural:"quintiliões"},{singular:"sextilião",plural:"sextiliões"},{singular:"septilião",plural:"septiliões"},{singular:"octilião",plural:"octiliões"},{singular:"nonilião",plural:"noniliões"},{singular:"decilião",plural:"deciliões"}]}},18(b,a){a.exports={useLongScale:!1,baseSeparator:"-",unitSeparator:"",base:{"0":"zéro","1":"un","2":"deux","3":"trois","4":"quatre","5":"cinq","6":"six","7":"sept","8":"huit","9":"neuf","10":"dix","11":"onze","12":"douze","13":"treize","14":"quatorze","15":"quinze","16":"seize","17":"dix-sept","18":"dix-huit","19":"dix-neuf","20":"vingt","30":"trente","40":"quarante","50":"cinquante","60":"soixante","70":"soixante-dix","80":"quatre-vingt","90":"quatre-vingt-dix"},units:[{singular:"cent",plural:"cents",avoidInNumberPlural:!0,avoidPrefixException:[1]},{singular:"mille",avoidPrefixException:[1]},{singular:"million",plural:"millions"},{singular:"milliard",plural:"milliards"},{singular:"billion",plural:"billions"},{singular:"billiard",plural:"billiards"},{singular:"trillion",plural:"trillions"},{singular:"trilliard",plural:"trilliards"},{singular:"quadrillion",plural:"quadrillions"},{singular:"quadrilliard",plural:"quadrilliards"},{singular:"quintillion",plural:"quintillions"},{singular:"quintilliard",plural:"quintilliards"},{singular:"sextillion",plural:"sextillions"},{singular:"sextilliard",plural:"sextilliards"},{singular:"septillion",plural:"septillions"},{singular:"septilliard",plural:"septilliards"},{singular:"octillion",plural:"octillions"}],unitExceptions:{"21":"vingt et un","31":"trente et un","41":"quarante et un","51":"cinquante et un","61":"soixante et un","71":"soixante et onze","72":"soixante-douze","73":"soixante-treize","74":"soixante-quatorze","75":"soixante-quinze","76":"soixante-seize","77":"soixante-dix-sept","78":"soixante-dix-huit","79":"soixante-dix-neuf","80":"quatre-vingts","91":"quatre-vingt-onze","92":"quatre-vingt-douze","93":"quatre-vingt-treize","94":"quatre-vingt-quatorze","95":"quatre-vingt-quinze","96":"quatre-vingt-seize","97":"quatre-vingt-dix-sept","98":"quatre-vingt-dix-huit","99":"quatre-vingt-dix-neuf"}}},16(b,a){a.exports={useLongScale:!1,baseSeparator:" ",unitSeparator:"",base:{"0":"nulo","1":"unu","2":"du","3":"tri","4":"kvar","5":"kvin","6":"ses","7":"sep","8":"ok","9":"naŭ","10":"dek","20":"dudek","30":"tridek","40":"kvardek","50":"kvindek","60":"sesdek","70":"sepdek","80":"okdek","90":"naŭdek","100":"cent","200":"ducent","300":"tricent","400":"kvarcent","500":"kvincent","600":"sescent","700":"sepcent","800":"okcent","900":"naŭcent"},units:[{useBaseInstead:!0,useBaseException:[]},{singular:"mil",avoidPrefixException:[1]},{singular:"miliono",plural:"milionoj",avoidPrefixException:[1]},{singular:"miliardo",plural:"miliardoj",avoidPrefixException:[1]},{singular:"biliono",plural:"bilionoj",avoidPrefixException:[1]}],unitExceptions:[]}},21(b,a){a.exports={useLongScale:!1,baseSeparator:"",unitSeparator:"",generalSeparator:"",wordSeparator:"",base:{"0":"zero","1":"uno","2":"due","3":"tre","4":"quattro","5":"cinque","6":"sei","7":"sette","8":"otto","9":"nove","10":"dieci","11":"undici","12":"dodici","13":"tredici","14":"quattordici","15":"quindici","16":"sedici","17":"diciassette","18":"diciotto","19":"diciannove","20":"venti","21":"ventuno","23":"ventitré","28":"ventotto","30":"trenta","31":"trentuno","33":"trentatré","38":"trentotto","40":"quaranta","41":"quarantuno","43":"quaranta­tré","48":"quarantotto","50":"cinquanta","51":"cinquantuno","53":"cinquantatré","58":"cinquantotto","60":"sessanta","61":"sessantuno","63":"sessanta­tré","68":"sessantotto","70":"settanta","71":"settantuno","73":"settantatré","78":"settantotto","80":"ottanta","81":"ottantuno","83":"ottantatré","88":"ottantotto","90":"novanta","91":"novantuno","93":"novantatré","98":"novantotto","100":"cento","101":"centuno","108":"centootto","180":"centottanta","201":"duecentuno","301":"tre­cent­uno","401":"quattro­cent­uno","501":"cinque­cent­uno","601":"sei­cent­uno","701":"sette­cent­uno","801":"otto­cent­uno","901":"nove­cent­uno"},unitExceptions:{"1":"un"},units:[{singular:"cento",avoidPrefixException:[1]},{singular:"mille",plural:"mila",avoidPrefixException:[1]},{singular:"milione",plural:"milioni"},{singular:"miliardo",plural:"miliardi"},{singular:"bilione",plural:"bilioni"},{singular:"biliardo",plural:"biliardi"},{singular:"trilione",plural:"trilioni"},{singular:"triliardo",plural:"triliardi"},{singular:"quadrilione",plural:"quadrilioni"},{singular:"quadriliardo",plural:"quadriliardi"}]}},26(b,a){a.exports={useLongScale:!1,baseSeparator:" ",unitSeparator:"và ",base:{"0":"không","1":"một","2":"hai","3":"ba","4":"bốn","5":"năm","6":"sáu","7":"bảy","8":"tám","9":"chín","10":"mười","15":"mười lăm","20":"hai mươi","21":"hai mươi mốt","25":"hai mươi lăm","30":"ba mươi","31":"ba mươi mốt","40":"bốn mươi","41":"bốn mươi mốt","45":"bốn mươi lăm","50":"năm mươi","51":"năm mươi mốt","55":"năm mươi lăm","60":"sáu mươi","61":"sáu mươi mốt","65":"sáu mươi lăm","70":"bảy mươi","71":"bảy mươi mốt","75":"bảy mươi lăm","80":"tám mươi","81":"tám mươi mốt","85":"tám mươi lăm","90":"chín mươi","91":"chín mươi mốt","95":"chín mươi lăm"},units:["trăm","ngàn","triệu","tỷ","nghìn tỷ"],unitExceptions:[]}},24(b,a){a.exports={useLongScale:!1,baseSeparator:" ",unitSeparator:"",base:{"0":"sıfır","1":"bir","2":"iki","3":"üç","4":"dört","5":"beş","6":"altı","7":"yedi","8":"sekiz","9":"dokuz","10":"on","20":"yirmi","30":"otuz","40":"kırk","50":"elli","60":"altmış","70":"yetmiş","80":"seksen","90":"doksan"},units:[{singular:"yüz",avoidPrefixException:[1]},{singular:"bin",avoidPrefixException:[1]},"milyon","milyar","trilyon","katrilyon","kentilyon","sekstilyon","septilyon","oktilyon","nonilyon","desilyon","andesilyon","dodesilyon","tredesilyon","katordesilyon","kendesilyon"],unitExceptions:[]}},19(b,a){a.exports={useLongScale:!0,baseSeparator:"",unitSeparator:"és ",base:{"0":"nulla","1":"egy","2":"kettő","3":"három","4":"négy","5":"öt","6":"hat","7":"hét","8":"nyolc","9":"kilenc","10":"tíz","11":"tizenegy","12":"tizenkettő","13":"tizenhárom","14":"tizennégy","15":"tizenöt","16":"tizenhat","17":"tizenhét","18":"tizennyolc","19":"tizenkilenc","20":"húsz","21":"huszonegy","22":"huszonkettő","23":"huszonhárom","24":"huszonnégy","25":"huszonöt","26":"huszonhat","27":"huszonhét","28":"huszonnyolc","29":"huszonkilenc","30":"harminc","40":"negyven","50":"ötven","60":"hatvan","70":"hetven","80":"nyolcvan","90":"kilencven","100":"száz","200":"kétszáz","300":"háromszáz","400":"négyszáz","500":"ötszáz","600":"hatszáz","700":"hétszáz","800":"nyolcszáz","900":"kilencszáz","1000":"ezer"},unitExceptions:{"1":"egy"},units:[{singular:"száz",useBaseInstead:!0,useBaseException:[1]},{singular:"ezer",avoidPrefixException:[1]},{singular:"millió",avoidPrefixException:[1]},{singular:"milliárd",avoidPrefixException:[1]},{singular:"-billió",avoidPrefixException:[1]},{singular:"billiárd",avoidPrefixException:[1]},{singular:"trillió",avoidPrefixException:[1]},{singular:"trilliárd",avoidPrefixException:[1]},{singular:"kvadrillió",avoidPrefixException:[1]},{singular:"kvadrilliárd",avoidPrefixException:[1]},{singular:"kvintillió",avoidPrefixException:[1]},{singular:"kvintilliárd",avoidPrefixException:[1]},{singular:"szextillió",avoidPrefixException:[1]},{singular:"szeptillió",avoidPrefixException:[1]},{singular:"oktillió",avoidPrefixException:[1]},{singular:"nonillió",avoidPrefixException:[1]}]}},14(b,a){a.exports={useLongScale:!1,baseSeparator:"-",unitSeparator:"and ",base:{"0":"zero","1":"one","2":"two","3":"three","4":"four","5":"five","6":"six","7":"seven","8":"eight","9":"nine","10":"ten","11":"eleven","12":"twelve","13":"thirteen","14":"fourteen","15":"fifteen","16":"sixteen","17":"seventeen","18":"eighteen","19":"nineteen","20":"twenty","30":"thirty","40":"forty","50":"fifty","60":"sixty","70":"seventy","80":"eighty","90":"ninety"},units:{"2":"hundred","3":"thousand","5":"lakh","7":"crore"},unitExceptions:[]}},25(b,a){a.exports={useLongScale:!1,baseSeparator:" ",unitSeparator:"",base:{"0":"нуль","1":"один","2":"два","3":"три","4":"чотири","5":"п’ять","6":"шість","7":"сім","8":"вісім","9":"дев’ять","10":"десять","11":"одинадцять","12":"дванадцять","13":"тринадцять","14":"чотирнадцять","15":"п’ятнадцять","16":"шістнадцять","17":"сімнадцять","18":"вісімнадцять","19":"дев’ятнадцять","20":"двадцять","30":"тридцять","40":"сорок","50":"п’ятдесят","60":"шістдесят","70":"сімдесят","80":"вісімдесят","90":"дев’яносто","100":"сто","200":"двісті","300":"триста","400":"чотириста","500":"п’ятсот","600":"шістсот","700":"сімсот","800":"вісімсот","900":"дев’ятсот"},alternativeBase:{feminine:{"1":"одна","2":"дві"}},units:[{useBaseInstead:!0,useBaseException:[]},{singular:"тисяча",few:"тисячі",plural:"тисяч",useAlternativeBase:"feminine",useSingularEnding:!0,useFewEnding:!0,avoidEndingRules:[11,12,13,14,111,112,113,114,211,212,213,214,311,312,313,314,411,412,413,414,511,512,513,514,611,612,613,614,711,712,713,714,811,812,813,814,911,912,913,914]},{singular:"мільйон",few:"мільйони",plural:"мільйонів",useSingularEnding:!0,useFewEnding:!0,avoidEndingRules:[11,12,13,14,111,112,113,114,211,212,213,214,311,312,313,314,411,412,413,414,511,512,513,514,611,612,613,614,711,712,713,714,811,812,813,814,911,912,913,914]},{singular:"мільярд",few:"мільярди",plural:"мільярдів",useSingularEnding:!0,useFewEnding:!0,avoidEndingRules:[11,12,13,14,111,112,113,114,211,212,213,214,311,312,313,314,411,412,413,414,511,512,513,514,611,612,613,614,711,712,713,714,811,812,813,814,911,912,913,914]},{singular:"трильйон",few:"трильйони",plural:"трильйонів",useSingularEnding:!0,useFewEnding:!0,avoidEndingRules:[11,12,13,14,111,112,113,114,211,212,213,214,311,312,313,314,411,412,413,414,511,512,513,514,611,612,613,614,711,712,713,714,811,812,813,814,911,912,913,914]},{singular:"квадрильйон",few:"квадрильйони",plural:"квадрильйонів",useSingularEnding:!0,useFewEnding:!0,avoidEndingRules:[11,12,13,14,111,112,113,114,211,212,213,214,311,312,313,314,411,412,413,414,511,512,513,514,611,612,613,614,711,712,713,714,811,812,813,814,911,912,913,914]},{singular:"квінтильйон",few:"квінтильйони",plural:"квінтильйонів",useSingularEnding:!0,useFewEnding:!0,avoidEndingRules:[11,12,13,14,111,112,113,114,211,212,213,214,311,312,313,314,411,412,413,414,511,512,513,514,611,612,613,614,711,712,713,714,811,812,813,814,911,912,913,914]},{singular:"секстильйон",few:"секстильйони",plural:"секстильйонів",useSingularEnding:!0,useFewEnding:!0,avoidEndingRules:[11,12,13,14,111,112,113,114,211,212,213,214,311,312,313,314,411,412,413,414,511,512,513,514,611,612,613,614,711,712,713,714,811,812,813,814,911,912,913,914]},{singular:"септілліон",few:"септілліони",plural:"септілліонів",useSingularEnding:!0,useFewEnding:!0,avoidEndingRules:[11,12,13,14,111,112,113,114,211,212,213,214,311,312,313,314,411,412,413,414,511,512,513,514,611,612,613,614,711,712,713,714,811,812,813,814,911,912,913,914]},{singular:"октілліон",few:"октілліони",plural:"октілліонів",useSingularEnding:!0,useFewEnding:!0,avoidEndingRules:[11,12,13,14,111,112,113,114,211,212,213,214,311,312,313,314,411,412,413,414,511,512,513,514,611,612,613,614,711,712,713,714,811,812,813,814,911,912,913,914]},{singular:"нонілліон",few:"нонілліони",plural:"нонілліонів",useSingularEnding:!0,useFewEnding:!0,avoidEndingRules:[11,12,13,14,111,112,113,114,211,212,213,214,311,312,313,314,411,412,413,414,511,512,513,514,611,612,613,614,711,712,713,714,811,812,813,814,911,912,913,914]},{singular:"децілліон",few:"децілліони",plural:"децілліонів",useSingularEnding:!0,useFewEnding:!0,avoidEndingRules:[11,12,13,14,111,112,113,114,211,212,213,214,311,312,313,314,411,412,413,414,511,512,513,514,611,612,613,614,711,712,713,714,811,812,813,814,911,912,913,914]},{singular:"ундецілліон",few:"ундецілліони",plural:"ундецілліонів",useSingularEnding:!0,useFewEnding:!0,avoidEndingRules:[11,12,13,14,111,112,113,114,211,212,213,214,311,312,313,314,411,412,413,414,511,512,513,514,611,612,613,614,711,712,713,714,811,812,813,814,911,912,913,914]},{singular:"дуодецілліон",few:"дуодецілліони",plural:"дуодецілліонів",useSingularEnding:!0,useFewEnding:!0,avoidEndingRules:[11,12,13,14,111,112,113,114,211,212,213,214,311,312,313,314,411,412,413,414,511,512,513,514,611,612,613,614,711,712,713,714,811,812,813,814,911,912,913,914]},{singular:"тредецілліон",few:"тредецілліони",plural:"тредецілліонів",useSingularEnding:!0,useFewEnding:!0,avoidEndingRules:[11,12,13,14,111,112,113,114,211,212,213,214,311,312,313,314,411,412,413,414,511,512,513,514,611,612,613,614,711,712,713,714,811,812,813,814,911,912,913,914]},{singular:"кватуордецілліон",few:"кватуордецілліони",plural:"кватуордецілліонів",useSingularEnding:!0,useFewEnding:!0,avoidEndingRules:[11,12,13,14,111,112,113,114,211,212,213,214,311,312,313,314,411,412,413,414,511,512,513,514,611,612,613,614,711,712,713,714,811,812,813,814,911,912,913,914]},{singular:"квіндецілліон",few:"квіндецілліони",plural:"квіндецілліонів",useSingularEnding:!0,useFewEnding:!0,avoidEndingRules:[11,12,13,14,111,112,113,114,211,212,213,214,311,312,313,314,411,412,413,414,511,512,513,514,611,612,613,614,711,712,713,714,811,812,813,814,911,912,913,914]}],unitExceptions:[]}},20(b,a){a.exports={useLongScale:!1,baseSeparator:" ",unitSeparator:"",base:{"0":"nol","1":"satu","2":"dua","3":"tiga","4":"empat","5":"lima","6":"enam","7":"tujuh","8":"delapan","9":"sembilan","10":"sepuluh","11":"sebelas","12":"dua belas","13":"tiga belas","14":"empat belas","15":"lima belas","16":"enam belas","17":"tujuh belas","18":"delapan belas","19":"sembilan belas","20":"dua puluh","30":"tiga puluh","40":"empat puluh","50":"lima puluh","60":"enam puluh","70":"tujuh puluh","80":"delapan puluh","90":"sembilan puluh"},units:[{singular:"seratus",plural:"ratus",avoidPrefixException:[1]},{singular:"seribu",plural:"ribu",avoidPrefixException:[1]},"juta","miliar","triliun","kuadiliun"],unitExceptions:[]}},27(v,A){"use strict";v=A.exports=j;var w=k$(28),B=["en","es","ar","pt","fr","eo","it","vi","tr","uk","id"],t={en:k$(15),es:k$(17),ar:k$(13),pt:k$(23),ptPT:k$(22),fr:k$(18),eo:k$(16),it:k$(21),vi:k$(26),tr:k$(24),hu:k$(19),enIndian:k$(14),uk:k$(25),id:k$(20)};v.i18n=t;for(var x=[100],n=1;n<=16;n++)x.push(Math.pow(10,n*3));var y=[100,1000];for(n=1;n<=15;n++)y.push(Math.pow(10,n*6));j.defaults={noAnd:!1,alternativeBase:null,lang:"en"};function j(d,e){e=e||{},e=w.defaults(e,j.defaults);if(d<0)return"";d=Math.round(+d);var b=typeof e.lang==="string"?t[e.lang]:e.lang;b||(B.indexOf(j.defaults.lang)<0&&(j.defaults.lang="en"),b=t[j.defaults.lang]);var g=b.useLongScale?y:x,l=b.units,a;if(!(l instanceof Array)){var m=l;l=[],g=Object.keys(m);for(var h in g)l.push(m[g[h]]),g[h]=Math.pow(10,parseInt(g[h]))}var o=b.base,p=e.alternativeBase?b.alternativeBase[e.alternativeBase]:{};if(b.unitExceptions[d])return b.unitExceptions[d];if(p[d])return p[d];if(o[d])return o[d];if(d<100)return C(d,b,a,o,p,e);var q=d%100,i=[];q&&(e.noAnd&&!(b.andException&&b.andException[10])?i.push(j(q,e)):i.push(b.unitSeparator+j(q,e)));for(var r,h=0,z=l.length;h<z;h++){var c=Math.floor(d/g[h]),u;h===z-1?u=1e06:u=g[h+1]/g[h],c%=u,a=l[h];if(!c)continue;r=g[h];if(a.useBaseInstead){var D=a.useBaseException.indexOf(c)>-1&&(a.useBaseExceptionWhenNoTrailingNumbers?h===0&&i.length:!0);D?i.push(c>1&&a.plural?a.plural:a.singular):i.push(p[c*g[h]]||o[c*g[h]]);continue}var k;typeof a==="string"?k=a:c===1||a.useSingularEnding&&c%10===1&&(!a.avoidEndingRules||a.avoidEndingRules.indexOf(c)<0)?k=a.singular:a.few&&(c>1&&c<5||a.useFewEnding&&c%10>1&&c%10<5&&(!a.avoidEndingRules||a.avoidEndingRules.indexOf(c)<0))?k=a.few:(k=a.plural&&(!a.avoidInNumberPlural||!q)?a.plural:a.singular,k=c===2&&a.dual?a.dual:k,k=c>10&&a.restrictedPlural?a.singular:k);if(a.avoidPrefixException&&a.avoidPrefixException.indexOf(c)>-1){i.push(k);continue}var E=b.unitExceptions[c],F=E||j(c,w.defaults({noAnd:!(b.andException&&b.andException[c]||a.andException)&&!0,alternativeBase:a.useAlternativeBase},e));d-=c*g[h],i.push(F+" "+k)}var G=r*Math.floor(d/r),H=d-G;b.andWhenTrailing&&r&&0<H&&i[0].indexOf(b.unitSeparator)!==0&&(i=[i[0],b.unitSeparator.replace(/\s+$/,"")].concat(i.slice(1)));if(b.allSeparator)for(var s=0;s<i.length-1;s++)i[s]=b.allSeparator+i[s];var I=i.reverse().join(" ");return I}function C(d,e,b,g,l,a){var m=Math.floor(d/10)*10;return b=d-m,b?l[m]||g[m]+e.baseSeparator+j(b,a):l[m]||g[m]}},29(){const W=p$(27);const o=[{challenge:a=>"At the beginning of your upkeep phase out each creature you control. At the beginning of you end step phase in each creature you control.",reward:a=>"When you leave this room exile each creature you creature you control and then return it to the battlefield under your control. Then end the turn.",description:"One of your party attempt to walk across the room. A crackling electric energy fills the room. The party member vanishes. Moments later all the hairs on your body begin to stand on end a flash of light and the party member is back looking dazed but no worse for wear."},{challenge:a=>`You may not leave this room. Tap any number of creatures you control with total power ${a} or more: You may leave this room until end of turn.`,reward:a=>`Put a +1/+1 counter on up to ${a} target creature${a>1?"s":""}. Then end the turn.`,description:"That door seems braced from the other side. Going to really take some force to break it down."},{challenge:a=>`When you enter this room each creature you control takes ${a-5<2?1:a-5} damage.`,reward:a=>`When you leave this room create ${a-5<2?1:a-5} clue token${a-5<2?"":"s"}. Then end the turn.`,description:"The a tile drop out from the floor into a dark abyss, then another, and another. Suddenly the whole floor is collapsing!"},{challenge:a=>`At the beginning of your end step sacrifice ${a-5<2?"one":W.default(a-5)} creature${a-5<2?"":"s"}. Whenever you cast more than three spells in a turn you may move to an adjacent room.`,reward:a=>"When you leave this room create a clue token for each creature you sacrificed in it. Then end the turn.",description:"The walls are closing in! Quickly brace them with whatever you can find!"},{challenge:a=>`At the beginning of your upkeep you take ${a-5<2?"one":W.default(a-5)} damage. At the beginning of your endstep you may pay ${a-5<2?1:a-5}. If you do, you gain ${a-5<2?"one":W.default(a-5)} life.`,reward:a=>"When you leave this room you may sacrifice any number of non basic lands. For each land sacrificed this way create 5 treasure tokens. Then end the turn.",description:"As you enter a large black walled room a large mechanical eye hanging from th e ceiling turns to face you. You immedtely hear a humm climbing in pitch. Seconds later a heat rays reaches out to incinerate you and your party."},{challenge:a=>`At the beginning of your endstep, create ${W.default(a)} 1/1 red goblin token creature${a>1?"s":""}. They fight one of your creatures chosen at random.`,reward:a=>`When you leave this room create ${a-3<2?1:a-3} treasure token${a-3<2?"":"s"}. Then end the turn.`,description:'Ahead of you a small filthy goblin emerges from behind some rubble. She looks just as suprised to see you as you are to see her. This only lasts a moment before she grabs a twisted horn hanging from around her kneck and lets loose two loud bursts of "noise" before diving back into the a small hole in the wall. Prepare yourselves for battle!'},{challenge:a=>`At the beginning of your endstep create ${W.default(a)} 2/2 black zombie token creature${a>1?"s":""} tapped. Whenever a zombie you control becomes untapped you lose 1 life and it fights the creature you control with the greatest power. Tap ${a*2} untapped zombies you control. Return a creature from your graveyard to the battlefield tapped. It is a zombie in addition to its other types.`,reward:a=>`When you leave this room create ${a-3<2?1:a-3} food token${a-3<2?"":"s"}. Then end the turn.`,description:"Weary from your travels you are happy to have finally arrived at what seems to be a safe room. It seems to be dinner time and you are exited to eat anything, even your trail rations! As you enter and start to settle in you immeditaly become aware of a stench. Something is terribly wrong here. You don't see or hear anything until a refuse pile begins to move. It immeditaly becomes clear that what you thought was discarded, rotting rags in the low light was in fact a pile of corpses that are now rising. Before you can flee the undead pour from the surrounding dungeon. The zombies attack!"},{challenge:a=>`At the bginning of your upkeep you lose ${a-3<2?1:a-3} life, draw ${a-3<2?1:a-3} cards, and each opponent gains ${a-3<2?1:a-3} life. At the beginning of your endstep discard ${a-3<2?1:a-3} card${a-3<2?"":"s"}.`,reward:a=>`When you leave this room create ${a} treasure token${a>1?"s":""}. Then end the turn.`,description:`As you trudge along a muddy well tread path in a cave portion of the dungeon you hear a series of bird calls. "That's odd" remarks one of your party members. Before you are able to identify the origin of these calls a massive man steps out from behind a large stelagtite brandishing a giant spiked club. He recommends that you give up all of your gold without a fight. When you reach for your weapons the large bandit looks suddenly enraged as he commands his band of scum and villiany to attack. A number of other bandits reveal step from the shadows. This might be a tougher fight that you had first though.`},{challenge:a=>`At the beginning of your turn create ${W.default(a)} 1/1 green Saproling token creature${a>1?"s":""}. When there are ${W.default(a*2)} or more Saprolings created this way they fight the creature you control with the greatest toughness. If that creature is put into a graveyard this turn, create 1/1 green Saproling token creatures equal to it's toughness.`,reward:a=>`When you leave this room create ${a-3<2?1:a-3} food token${a-3<2?"":"s"}. Then end the turn.`,description:'A small creature crawls out of a hollow rotting mushroom stump. It is covered so thickly in moss, mold, and fungus that you are unsure if there is a creature underneath. In a chittering voice it says "Nothing personal but the forest must feed".'},{challenge:a=>`At the end of your turn tap ${W.default(a)} creatures you control. Whenever a creature you control becomes untapped mill the top card of your library.`,reward:a=>`When you leave this room create ${a} clue token${a>1?"s":""}. Then end the turn.`,description:"You find yourslf in a large step well. You begin to decend towards the bottom seeing a stairway up the other side. After a couple minutes  you hear a rumbling in the distance. Then you feel it. A rectangular openning along the length of the rooms ceiling begins to gush water. Within moments you and your party are swiming for your lives."},{challenge:a=>`While in this room, blue creatures you control get -3/-0. Red creatures you control get +3/0. At the beginning of your upkeep create a ${a}/${a} green ooze token. It fights the creature with the greatest power on the battlefield. Then exile the top ${a} cards of your library. You may play those cards until end of turn.`,reward:a=>`When you leave this room create ${a-3<2?1:a-3} food token${a-3<2?"":"s"}. Then end the turn.`,description:"You find yourself in a natural cave formation covered in luminecent fungi, lichen, and moss. Wondering along a small path you start to smell smoke. Suddenly a massive patch of flaming slimey moss hurdles past you and smashes into a massive stelagtite. That was no normal moss says one of your party. Without any other warning fire begins to spring up all around you, as the cave begins to move and ungulate, no longer rooted to the ground. You have stumbled into a battle between an Elemental Shamman and the very biome itself. Chaos reigns as the fire spreads!"},{challenge:a=>"Whenever you play a spell counter it and create 1/1 blue Bird tokens with flying equal to the mana value of the countered spell. Whenever a creature with flying attacks, its owner mills a card.",reward:a=>`When you leave this room create ${a-3<2?1:a-3} food token${a-3<2?"":"s"}. Then end the turn.`,description:"You step into a massive room with varios opennings in the cieling. One of them even looks like there might be a pin prick of sunlight at the top. Suprisingly you hears the songs of birds echoing around the room. Hundreds if not thousands of them. It's beautiful to see the patterns of the flock as they ebb and flow along the ceiling. Hmmm, they look like they are almost headed in this direction. Ohh, they are definitely headed in this direction. That's a lot of birds. Oh crap! That's a lot of birds! No time to run!"},{challenge:a=>`At the beginning of your upkeep create ${a-3<2?"one":W.default(a-3)} 1/1 white Spirit token${a-3<2?"":"s"} with flying. Non-creature spells cost 1 extra for each spirit you control. If a player would search their library they instead gain 5 life.`,reward:a=>`When you leave this room create ${a-3<2?1:a-3} clue token${a-3<2?"":"s"}. Then end the turn.`,description:"The sound of rattling chains and shackles, seems to suround you. Soon after the misty forms of spirits, phantoms, and apprartions come into view. This is clearly a cavern of lost souls."},{challenge:a=>`At the beginning of your upkeep create each player creates ${W.default(a)} 1/1 Contruct artifact creature token${a-3<2?"":"s"}. At the beginning of your endstep put a +1/+1 on each artifact creature then return each non-artifact creature to its owners hand.`,reward:a=>`When you leave this room create ${a-3<2?1:a-3} clue token${a-3<2?"":"s"}. Then end the turn.`,description:"You have entered ruins from some advanced magic weilding civilization. They are ancient and bizarre contructs unlike anything you have ever seen lining each room. After an uneventful day of rummaging, one of your party members finds an orb covered in various runes. It hums with a calmning resonence. As you brush your fingers over some of the symbols, it suddenly begins to hum much loader. Immediatly the machines begin to move!"}],s={challenge:a=>"When you enter this room you gain 20 life, shuffle your graveyard into your library, then draw 7 cards. Untap all lands you control. Until the end of turn spells in your hand are free to cast.",reward:a=>"When you leave this room you must create a new dungeon and start at level 1. Then end the turn.",description:"This will be a grand conclusion story"},X={challenge:a=>"This room is empty.",reward:a=>"When you leave this room nothing happens. Then end the turn.",description:"The dungeon awaits!"};const t={max_iterations:50,size:[100,100],seed:H(5),rooms:{initial:{min_size:[3,3],max_size:[3,3],max_exits:2,position:[0,0]},any:{min_size:[2,2],max_size:[5,5],max_exits:4}},max_corridor_length:6,min_corridor_length:2,corridor_density:2,symmetric_rooms:!1,interconnects:2,max_interconnect_length:10,room_count:10};function H(a){for(var b="",d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=d.length,h=0;h<a;h++)b+=d.charAt(Math.floor(Math.random()*c));return b}const N=p$(0);const j=document.querySelector(".map"),u=document.querySelector(".desc"),v=document.querySelector(".challenge"),w=document.querySelector(".reward"),x=document.querySelector(".room"),y=document.querySelector(".rules-wrapper"),k=[];let i=1;const l=[],e=[],m=[1],z=2;let f=new N.default(t);const A='<svg height="512" viewBox="0 0 512 512" width="512" xmlns="http://www.w3.org/2000/svg"><path d="m0 0h512v512h-512z" fill="none"/><path d="m256 23.57-16.1 48.86h32.2zm-183 66.86v15.97h366v-15.97zm48 33.97v354.6l135-105 135 105v-354.6zm87 37h96l-32 80 80-32v96l-80-32 32 80h-96l32-80-80 32v-96l80 32zm48 235.4-23 17.9v73.7h46v-73.7z" stroke="#e5e4e4" stroke-width="4"/></svg>';window.onload=()=>{f.generate(),console.log(f),C(),p(),y.style.maxWidth=j.offsetWidth+"px",E(z),B(),q()},j.addEventListener("click",a=>{if(a.target.dataset.room){i=a.target.dataset.room;const b=parseInt(i);m.includes(b)||m.push(b),q(),p()}},!0);function p(){let a="";for(let b=0;b<f.walls.rows.length;b++){a+="<div>";for(let d=0;d<f.walls.rows[b].length;d++){const c=d+"-"+b,h=D(d,b,f.children);if(k.includes(c)){const n=k.indexOf(c)+1,I=parseInt(i),J=n===I?A:n;a+="<div "+(h?'data-room="'+h+'"':"")+' class="empty area">'+(m.includes(n)?J:"")+"</div>"}else f.walls.rows[b][d]?a+='<div class="filled"></div>':a+="<div "+(h?'data-room="'+h+'"':"")+' class="empty '+(h?"area":"")+'"></div>'}a+="</div>"}j.innerHTML=a}function B(){for(let a=0;a<f.children.length-1;a++){const b=G(e[0],e[e.length-1]),d=F(b),c=e.indexOf(d),h=o[c];l.push(h)}l.push(s)}function C(){for(let a=0;a<f.children.length;a++){const b=f.children[a].position[0]+1+Math.floor(f.children[a].room_size[0]/2)+"-"+(f.children[a].position[1]+1+Math.floor(f.children[a].room_size[1]/2));k.push(b)}}function D(a,b,d){for(let c=0;c<d.length;c++)if(a>d[c].position[0]&&a<=d[c].position[0]+d[c].room_size[0]&&b>d[c].position[1]&&b<=d[c].position[1]+d[c].room_size[1])return c+1;return}function q(){const a=i>4?4:i,b=l[i-1];x.textContent="Dungeon Level: "+a,u.textContent=b.description,v.textContent=b.challenge?b.challenge(a):void 0,w.textContent=b.reward?b.reward(a):void 0}function E(a){const b=[];for(let d=0;d<o.length;d++)e.push(Math.pow(d,a))}function F(a){let b,d;for(let c=0;c<e.length;c++){if(e[c]>a&&c===0)return 0;if(e[c]>a)return b=e[c-1]-a,d=e[c]-a,d<b?e[c]:e[c-1]}}function G(a,b){return a=Math.ceil(a),b=Math.floor(b),Math.floor(Math.random()*(b-a+1)+a)}}};return k$(29)})();
